<html>
<head>
	<title>Jerry</title>
	<link rel             = "stylesheet" type="text/css" href="css/style.css"/>
</head>
<body>
	<video id             = "videoSource" muted autoplay width="240px" height="200px"></video>
	<a id                 = "Catch"></a>
	<a id                 = "distanceRemained"></a>
	<!-- 	<canvas id      = "myCanvas"></canvas> -->

	<div id               = "result">
		<p id                = "resultResult">ooops</p>
		<button class        = "bu" id="anotherRound">Another Round</button>
	</div>
</body>
<script src            = "js/vendor/three.min.js"></script>
<script src            = "js/vendor/THREEx.KeyboardState.js"></script>
<script src            = "js/vendor/clmtrackr.js"></script>

<script src            = "js/vendor/camera.js"></script>	
<script src            = "js/vendor/model_pca_20_svm.js"></script>
<script src            = "js/vendor/OrbitControls.js"></script>
<script src            = "/socket.io/socket.io.js"></script>

<script src            = "js/initScene.js"></script>
<script src            = "js/mechanic.js"></script>
<script src            = "js/socket.js"></script>
<script>



//CAMERA
camera.rotation.y      = 180 * Math.PI / 180;




//CONTROLS
// var controls        = new THREE.OrbitControls( camera );
socket.emit('reset');
		

//var keyboard         = new THREEx.KeyboardState();



var updateJerry        = function(){

	// if (Math.abs(tom.position.z-jerry.position.z)>disBetTandJ){
	// 	jerry.position.z     = tom.position.z-disBetTandJ-0.01;
	// }


	faceDetection();
	jerry.position.z +=jerrySpeed;
	if(aPos){
		shift                = jerryMetaShift*(aPos[0]-120)/1200; //120~-120
		// camera.position.x = 20*((240-aPos[0])/240-0.5); //10- -10
	}
	jerry.position.x +=shift;
	jerry.position.x      = Math.max(jerry.position.x,-groundWidth/2);
	jerry.position.x      = Math.min(jerry.position.x,groundWidth/2);
}

var updateTom          = function(){
	// var step           = 0.3
	// if(tom.position.x>jerry.position.x)
	// tom.position.x -=step;
	// else tom.position.x+=step;
}


var render             = function () {
	if (gameStop) return;
	result();	
	updateJerry();
	// updateTom();
	emitPosition(jerry);
	setCamera(jerry.position.x,jerry.position.y,jerry.position.z);
	updateDistanceRemained();
	updateJerrySpeed();
	renderer.render(scene, camera);
};

function animate() {

	requestAnimationFrame( animate );

	render();

}
animate();
</script>

</html>


